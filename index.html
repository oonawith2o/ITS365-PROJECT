<!DOCTYPE html>
<html>
    <head>
        <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js" ></script>

        <script>

            async function load() {

                class L2 {
                    static className = 'L2';
                    constructor(config) {
                        return tf.regularizers.l1l2(config)
                    }
                }
                
                tf.serialization.registerClass(L2);

                 const url = 'https://oonawith2o.github.io/ITS365-PROJECT/Model-ITS365-RAW//model.json';
                 const model = await tf.loadLayersModel(url);
                 return model;
            };
            
            function predict(model) {
                const Age = document.getElementById('Age').value;
                const Games = document.getElementById('Games').value;
                const Minutes = document.getElementById('Minutes').value;
                const FGM = document.getElementById('FGM').value;
                const FGA = document.getElementById('FGA').value;
                const FTM = document.getElementById('FGM').value;
                const FTA = document.getElementById('FGA').value;
                const ORB = document.getElementById('ORB').value;
                const TRB = document.getElementById('TRB').value;
                const AST = document.getElementById('AST').value;
                const STL = document.getElementById('STL').value;
                const BLK = document.getElementById('BLK').value;
                const PF = document.getElementById('PF').value;
                const PTS = document.getElementById('PTS').value;
                const FGP = document.getElementById('FGP').value * .01;
                const FTP = document.getElementById('FTP').value * .01;
                const MPG = document.getElementById('MPG').value;
                const PPG = document.getElementById('PPG').value;
                const RPG = document.getElementById('RPG').value;
                const APG = document.getElementById('APG').value;


                const inputTensor = tf.tensor([[parseInt(Age), parseInt(Games), parseInt(Minutes),
                                                parseInt(FGM), parseInt(FGA), parseInt(FTM),
                                                parseInt(FTA), parseInt(ORB), parseInt(TRB),
                                                parseInt(AST), parseInt(STL), parseInt(BLK),
                                                parseInt(PF), parseInt(PTS), parseFloat(FGP),
                                                parseFloat(FTP), parseFloat(MPG), parseFloat(PPG),
                                                parseFloat(RPG), parseFloat(APG)
                ]]);
                
                model.then(model => {
                    let tensor_result = model.predict(inputTensor);
                    let result = tensor_result.dataSync()[0]
                    console.log(result)
                    alert("The Win Share of the Selected Player is: " + result.toFixed(2));
                });
            };
            
            const model = load();
            
            </script>
    </head>
    <body>
        Age: <input id="Age" type="text">  </input><br>
        Games Played: <input id="Games" type="text">  </input><br>
        Minutes Logged: <input id="Minutes" type="text">  </input><br>
        Field Goals Made: <input id="FGM" type="text">  </input><br>
        Field Goals Attempted: <input id="FGA" type="text">  </input><br>
        Free Throws Made: <input id="FTM" type="text">  </input><br>
        Free Throws Attempted: <input id="FTA" type="text">  </input><br>
        Offensive Rebounds: <input id="ORB" type="text">  </input><br>
        Total Rebounds: <input id="TRB" type="text">  </input><br>
        Assists: <input id="AST" type="text">  </input><br>
        Steals: <input id="STL" type="text">  </input><br>
        Blocks: <input id="BLK" type="text">  </input><br>
        Personal Fouls: <input id="PF" type="text">  </input><br>
        Points: <input id="PTS" type="text">  </input><br>
        Field Goal Percentage: <input id="FGP" type="text">  </input><br>
        Free Throw Percentage: <input id="FTP" type="text">  </input><br>
        Minutes Per Game: <input id="MPG" type="text">  </input><br>
        Points Per Game: <input id="PPG" type="text">  </input><br>
        Rebounds Per Game: <input id="RPG" type="text">  </input><br>
        Assists Per Game: <input id="APG" type="text">  </input><br>
        <button onclick="predict(model)">Predict</button>
    </body>
</html>